- id: cronostar_termostato_appartamento_apply
  alias: "CronoStar - apply termostato appartamento"
  description: "Generated by CronoStar Editor"
  mode: restart
  triggers:
    - trigger: time_pattern
      minutes: "0"
    - trigger: event
      event_type: cronostar_profiles_loaded
  conditions:
    - condition: state
      entity_id: input_boolean.cronostar_termostato_appartamento_paused
      state: "off"
  actions:
    - variables:
        current_hour: "{{ now().hour }}"
        hour_str: "{{ '%02d' | format(current_hour) }}"
        target_input: "input_number.cronostar_termostato_appartamento_current"
        target_value: "{{ states(target_input) | float(20) }}"
    - action: system_log.write
      data:
        message: "[CronoStar] Applying {{ target_value }} to climate.climatizzazione_appartamento"
        level: info
    - action: climate.set_temperature
      target:
        entity_id: climate.climatizzazione_appartamento
      data:
        temperature: "{{ target_value }}"