- id: cronostar_switch_presa_balcone_apply
  alias: "CronoStar - apply switch presa balcone"
  description: "Generated by CronoStar Editor"
  mode: restart
  triggers:
    - trigger: time_pattern
      minutes: "0"
    - trigger: event
      event_type: cronostar_profiles_loaded
  conditions: []
  actions:
    - variables:
        current_hour: "{{ now().hour }}"
        hour_str: "{{ '%02d' | format(current_hour) }}"
        target_input: "input_number.cronostar_switch_presa_balcone_current"
        target_value: "{{ states(target_input) | float(0) }}"
    - action: system_log.write
      data:
        message: "[CronoStar] Applying {{ target_value }} to switch.wifi_breaker_switch_luci_natale"
        level: info
    - if:
        - condition: template
          value_template: "{{ target_value | int > 0 }}"
      then:
        - action: switch.turn_on
          target:
            entity_id: switch.wifi_breaker_switch_luci_natale
      else:
        - action: switch.turn_off
          target:
            entity_id: switch.wifi_breaker_switch_luci_natale