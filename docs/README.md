# CronoStar Integration

CronoStar provides advanced time-based scheduling with profile management for Home Assistant.

## High-level description
- Create controllers via the UI to apply scheduled values to a target entity (e.g., climate, input_number, switch, cover).
- Store and manage multiple profiles (schedules) on disk, with caching and optional backups.
- A Lovelace card helps visualize and edit profiles.

## Installation
1. In Home Assistant, go to Settings → Devices & Services → Integrations → Add Integration.
2. Search for "CronoStar" and start the flow.
3. Install the component (registers resources and services).
4. Run the flow again to add a controller.

## Configuration parameters (controller)
- name: A human-friendly name for the controller.
- preset: One of thermostat, ev_charging, generic_kwh, generic_temperature, generic_switch, cover.
- target_entity: The entity that receives scheduled values (e.g., `climate.living_room`).
- global_prefix: String used to identify related storage files (default `cronostar_`).
- logging_enabled: Enable controller debug logging.

## Removal
- Remove a controller: Settings → Devices & Services → CronoStar → the controller → Delete.
- Remove the component: Remove the install entry (the one that says "CronoStar" only). This unregisters global services and resources.

## Supported entities and platforms
- Sensor: Shows current scheduled value.
- Switch: Pause/resume schedule application.
- Select: Choose active profile.

## How data is updated
- Each controller runs a coordinator with a 1-minute update cycle.
- When not paused and the target entity is available, the coordinator calculates an interpolated value and calls the appropriate service.

## Known limitations
- If no profile files exist for the controller prefix/preset, defaults are used and current value remains until a schedule is available.
- The integration does not yet include diagnostics or discovery.

## Troubleshooting
- Ensure the target entity exists and is available.
- Check logs for messages from `custom_components.cronostar`.
- Verify profile storage path in `/config/cronostar/profiles`.

## Service actions
- `cronostar.apply_now`: Apply current schedule immediately.
- `cronostar.save_profile`, `cronostar.load_profile`, `cronostar.add_profile`, `cronostar.delete_profile`, `cronostar.list_all_profiles`: Manage profiles.

## Examples
- Automation to apply hourly (generated by the card) or call `cronostar.apply_now` on schedule.

## Integration owner
- Codeowners: `@FoliniC`
